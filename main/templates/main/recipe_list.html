{% extends "main/base.html" %}
{% load myfilters %}


{% block content %}

<script> window.CSRF_TOKEN = "{{ csrf_token }}"; </script>
<script> var userIsLoggedIn = {% if user.is_authenticated %}true{% else %}false{% endif %}; </script>

<div class="container">

	<h1>Recipes <span class="text-muted">({{ recipe_list.count }} out of {{ total_recipe_count }} total)</span></h1>

  <i id="recipy-logo" class="fa fa-cutlery"></i>


  <div class="row">
    {% for recipe in recipe_list %}
      <div class="col-md-3 col-sm-4 col-xs-6">
        <div class="panel panel-success recipe-card">

          <a href="{% url 'recipe_detail' recipe.id %}"><span class="div-link"></span></a>

          <div class="panel-heading">
            <h3 class="panel-title">{{ recipe.name }}</h3>
          </div>

          <div class="panel-body">
            {# <a href="{% url 'recipe_detail' recipe.id %}"><span class="div-link"></span></a> #}
            <img src="{{ recipe.yummly_image_url }}" class="img-responsive img-thumbnail center-block">

            <div class="col-md-12">
              <div class="alert alert-info">
                <span class="text-muted">Creator: </span>
                <span>{% if recipe.creator %}{{ recipe.creator }}{% else %}Yummly{% endif %}</span>
              </div>

              {# <button type="button" class="btn btn-default"> #}
              {# <button type="button" class="ingredients btn btn-default" data-toggle="popover" data-content="{% for ingredient in recipe.ingredients.all %}{{ ingredient }}, {% endfor %}"> #}
              <button type="button" class="ingredients btn btn-default" data-toggle="popover" data-content="{{ recipe.ingredients.all | list_ingredients }}">
                <span>Ingredients <i class="fa fa-angle-down"></i></span>
              </button>
            </div>
            <!--<div class="col-md-12 ingredients">
              {# <div class="pre-scrollable"> #}
                {% for ingredient in recipe.ingredients.all %}
                  <button type="button" class="btn btn-link">{{ ingredient }}</button>
                {% endfor %}
              {# </div> #}
            </div>
            -->
          </div>

          <div class="panel-footer">
            <div class="likeDislikeSaveButtons">
              <div class="btn-group btn-group-sm" role="group">
                {# Star icon for saving recipe #}
                {% if recipe in saved_recipes %}
                  <button type="button" class="btn btn-info save" data-recipe-id="{{ recipe.id }}" data-num-saves="{{ recipe.num_saves}}">
                    <i class="fa fa-star"></i> <span>{{ recipe.num_saves }}</span>
                  </button>
                {% else  %}
                  <button type="button" class="btn btn-default save" data-recipe-id="{{ recipe.id }}" data-num-saves="{{ recipe.num_saves }}">
                    <i class="fa fa-star"></i> <span>{{ recipe.num_saves }}</span>
                  </button>
                {% endif %}
              </div>

              <div class="btn-group btn-group-sm pull-right" role="group">
                {# Thumbs up and down for liking and disliking recipe #}
                {% if recipe in liked_recipes %}
                  <button type="button" class="btn btn-primary like" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-up"></i></button>
                  <button type="button" class="btn btn-default dislike" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-down"></i></button>
                {% elif recipe in disliked_recipes %}
                  <button type="button" class="btn btn-default like" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-up"></i></button>
                  <button type="button" class="btn btn-danger dislike" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-down"></i></button>
                {% else %}
                  <button type="button" class="btn btn-default like" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-up"></i></button>
                  <button type="button" class="btn btn-default dislike" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-down"></i></button>
                {% endif %}
              </div>
            </div>
          </div>

        </div>
      </div>
    {% endfor %}
  </div>


  <!--
  <div class="row">
	  {% if recipe_list %}
  		<ul class="list-group favorites-list">

  		  {% for recipe in recipe_list %}
    			<li class="list-group-item">

            <div class="buttonGroup btn-group btn-group-xs" role="group">
              {# Star icon for saving recipe #}
              {% if recipe in saved_recipes %}
                <button type="button" class="btn btn-info save" data-recipe-id="{{ recipe.id }}"><i class="fa fa-star"></i></button>
              {% else  %}
                <button type="button" class="btn btn-default save" data-recipe-id="{{ recipe.id }}"><i class="fa fa-star"></i></button>
              {% endif %}

              {# Thumbs up and down for liking and disliking recipe #}
              {% if recipe in liked_recipes %}
                <button type="button" class="btn btn-primary like" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-up"></i></button>
                <button type="button" class="btn btn-default dislike" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-down"></i></button>
              {% elif recipe in disliked_recipes %}
                <button type="button" class="btn btn-default like" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-up"></i></button>
                <button type="button" class="btn btn-danger dislike" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-down"></i></button>
              {% else %}
                <button type="button" class="btn btn-default like" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-up"></i></button>
                <button type="button" class="btn btn-default dislike" data-recipe-id="{{ recipe.id }}"><i class="fa fa-thumbs-down"></i></button>
              {% endif %}
            </div>


            <img src="{{ recipe.yummly_image_url }}">

            <a class="lead" href="{% url 'recipe_detail' recipe.id %}">{{ recipe.name }}</a>
            
            <span class="badge"><span class="favorite_count">{{ recipe.num_saves }}</span> stars</span>
    			</li>
  		  {% endfor %}

  		</ul>
	  {% else %}
  		<p>No recipes listed.</p>
	  {% endif %}
  </div>
  -->


</div>

{% endblock content %}

